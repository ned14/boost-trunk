subproject libs/regex/test ;

local test-dir = $(BOOST_ROOT)$(SLASH)libs$(SLASH)regex$(SLASH)test$(SLASH)regress$(SLASH) ;

local test-files = $(test-dir)tests.txt
  # dwa -- not sure if this is generally applicable
  #  $(test-dir)test1252.txt
  ;

unit-test regress : regress/parse.cpp regress/regress.cpp regress/tests.cpp
   <lib>../build/boost_regex$(SUFLIB) 
	: 
		<include>../../../
		<define>BOOST_REGEX_NO_LIB=1
		<define>BOOST_REGEX_STATIC_LINK=1
	: 
		debug
        : 
                $(test-files)
	;

unit-test wregress : regress/parse.cpp regress/regress.cpp regress/tests.cpp
   <lib>../build/boost_regex$(SUFLIB) 
	: 
		<include>../../../
		<define>BOOST_REGEX_NO_LIB=1
		<define>TEST_UNICODE=1
		<define>BOOST_REGEX_STATIC_LINK=1
	: 
		debug
        : 
                $(test-files)
	;

unit-test posix_api_check_c : c_compiler_checks/posix_api_check.c
   <lib>../build/boost_regex$(SUFLIB) 
	: 
		<include>../../../
		<define>BOOST_REGEX_NO_LIB=1
		<define>BOOST_REGEX_STATIC_LINK=1
	: 
		debug
        : 
	;

unit-test wide_posix_api_check_c : c_compiler_checks/wide_posix_api_check.c
   <lib>../build/boost_regex$(SUFLIB) 
	: 
		<include>../../../
		<define>BOOST_REGEX_NO_LIB=1
		<define>BOOST_REGEX_STATIC_LINK=1
	: 
		debug
        : 
	;

unit-test posix_api_check : c_compiler_checks/posix_api_check.cpp
   <lib>../build/boost_regex$(SUFLIB) 
	: 
		<include>../../../
		<define>BOOST_REGEX_NO_LIB=1
		<define>BOOST_REGEX_STATIC_LINK=1
	: 
		debug
        : 
	;

unit-test wide_posix_api_check : c_compiler_checks/wide_posix_api_check.cpp
   <lib>../build/boost_regex$(SUFLIB) 
	: 
		<include>../../../
		<define>BOOST_REGEX_NO_LIB=1
		<define>BOOST_REGEX_STATIC_LINK=1
	: 
		debug
        : 
	;










