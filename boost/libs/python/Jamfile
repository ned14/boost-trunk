subproject libs/python ;

# bring in the rules for python
SEARCH on <module@>python.jam = $(BOOST_BUILD_PATH) ;
include <module@>python.jam ;

local bpl-ldflags ;

if $(UNIX) && ( $(OS) = AIX )
{
    bpl-linkflags = <linkflags>"-e initlibbpl" ;
}

dll bpl
  : 
  src/list.cpp
  src/long.cpp
  src/dict.cpp
  src/tuple.cpp
  src/str.cpp

  src/aix_init_module.cpp
  src/converter/from_python.cpp
  src/converter/registry.cpp
  src/converter/type_id.cpp
  src/object/enum.cpp
  src/object/class.cpp
  src/object/function.cpp
  src/object/inheritance.cpp
  src/object/life_support.cpp
  src/object/pickle_support.cpp
  src/errors.cpp
  src/module.cpp
  src/converter/builtin_converters.cpp
  src/converter/arg_to_python_base.cpp
  src/object/iterator.cpp
  src/object_protocol.cpp
  src/object_operators.cpp
  :
  $(BOOST_PYTHON_V2_PROPERTIES)
    <define>BOOST_PYTHON_SOURCE
    $(bpl-linkflags)
    ;
