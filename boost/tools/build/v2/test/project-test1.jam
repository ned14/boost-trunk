module build-system { rule __dummy { } } # Keep the bogus assertion in Jambase happy
 
import project ;
import targets ;
import assert ;

rule exe ( name : sources )
{
    local module-name = [ CALLER_MODULE ] ;

    local project-target =
        [ targets.abstract-target-name [ $(module-name).location ] ] ;

    local exe-target = [ class.new typed-target $(name) : EXE ] ;

    $(project-target).depends $(exe-target) ;

}

IMPORT $(__name__) : exe : : exe ;

project.load project-test1 ;

project.dump ;

assert.result project-test1/dir2 : project.lookup @/cool-library ;
assert.result project-test1/dir2 : project.lookup project-test1@/cool-library ;
assert.result project-test1/dir  : project.lookup project-test1@dir ;

#local target = [ targets.abstract-target-name project-test1 ] ;
#$(target).generate ;

actions unbuilt { } unbuilt all ;

