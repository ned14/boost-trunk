#!/usr/bin/python
#
#  copyright (C) 2008  troy d. straszheim  <troy@resophonic.com>
#  
#  Distributed under the Boost Software License, Version 1.0.
#  See accompanying file LICENSE_1_0.txt or copy at
#  http://www.boost.org/LICENSE_1_0.txt
#

#
#  Utilities, variables, imports for build slave python
#

import os, os.path, marshal, xmlrpclib, pysvn, socket
from pprint import pprint

repo_path = "@CMAKE_SOURCE_DIR@"
client = pysvn.Client()
svn_entry = client.info(repo_path)
hostname = socket.gethostname()
uname = os.uname()
toolset = "@BOOST_TOOLSET@"

timeout_seconds = 30

xmlrpc_url = "@BOOST_BUILD_SLAVE_SUBMIT_URL@"

build_id_file = os.path.join("@BOOST_BUILD_SLAVE_PYTHONPATH@", "build_id.txt")

try:
    f = open(build_id_file)
    build_id = int(f.read())
except:
    build_id = None

def set_build_id(build_id):
    print "Setting new build id %d locally" % build_id
    f = open(build_id_file, "w")
    f.write(str(build_id))
    f.close()


